<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE mapper PUBLIC '-//mybatis.org//DTD Mapper 3.0//EN'
        'http://mybatis.org/dtd/mybatis-3-mapper.dtd'>
<mapper namespace="ru.honest.mybatis.repo.LevelsRepo">

    <sql id="all">id, deck_id, level_order, name, color, description</sql>

    <select id="getLevelsByDeck">
        SELECT <include refid="all"/>
        FROM levels
        WHERE deck_id = #{deckId}
    </select>

    <insert id="save">
        INSERT INTO levels
        VALUES (#{id}, #{deckId}, #{order}, #{name}, #{color}, #{description})
    </insert>

    <select id="exists">
        SELECT count(*) > 0
        FROM levels
        WHERE id = #{levelId}
    </select>
</mapper>